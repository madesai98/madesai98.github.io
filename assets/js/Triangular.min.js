var Triangular=function(){"use strict";var t=function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")},i=function(){function t(t,i){for(var e=0;e<i.length;e++){var n=i[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(i,e,n){return e&&t(i.prototype,e),n&&t(i,n),i}}(),e=function(){function e(){t(this,e)}return i(e,null,[{key:"interpolateLab",value:function(t,i){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.5;return[t[0]+e*(i[0]-t[0]),t[1]+e*(i[1]-t[1]),t[2]+e*(i[2]-t[2])]}},{key:"labToRgb",value:function(t){var i=(t[0]+16)/116,e=t[1]/500+i,n=i-t[2]/200;i=1*(i*i*i>.008856?i*i*i:(i-16/116)/7.787);var s=3.2406*(e=.95047*(e*e*e>.008856?e*e*e:(e-16/116)/7.787))+-1.5372*i+-.4986*(n=1.08883*(n*n*n>.008856?n*n*n:(n-16/116)/7.787)),o=-.9689*e+1.8758*i+.0415*n,a=.0557*e+-.204*i+1.057*n;return s=255*(s>.0031308?1.055*Math.pow(s,1/2.4)-.055:12.92*s),o=255*(o>.0031308?1.055*Math.pow(o,1/2.4)-.055:12.92*o),a=255*(a>.0031308?1.055*Math.pow(a,1/2.4)-.055:12.92*a),[Math.max(0,Math.min(255,Math.round(s))),Math.max(0,Math.min(255,Math.round(o))),Math.max(0,Math.min(255,Math.round(a)))]}},{key:"rgbToLab",value:function(t){var i=t[0]/255,e=t[1]/255,n=t[2]/255,s=(.4124*(i=i>.04045?Math.pow((i+.055)/1.055,2.4):i/12.92)+.3576*(e=e>.04045?Math.pow((e+.055)/1.055,2.4):e/12.92)+.1805*(n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92))/.95047,o=.2126*i+.7152*e+.0722*n,a=(.0193*i+.1192*e+.9505*n)/1.08883;return s=s>.008856?Math.pow(s,1/3):7.787*s+16/116,[116*(o=o>.008856?Math.pow(o,1/3):7.787*o+16/116)-16,500*(s-o),200*(o-(a=a>.008856?Math.pow(a,1/3):7.787*a+16/116))]}},{key:"getColor",value:function(t,i,n,s,o,a,h,r){var l=((t-n)/(o-n)+(i-s)/(a-s))/2;return e.labToRgb(e.interpolateLab(e.rgbToLab(h),e.rgbToLab(r),l))}}]),e}(),n=function(){function e(i,n,s){var o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];t(this,e),this.x0=i,this.y0=n,this.dx=Math.floor(Math.random()*s.animationRangeX*2)-s.animationRangeX,this.dy=Math.floor(Math.random()*s.animationRangeY*2)-s.animationRangeY,this.x=o?this.x0:this.x0+this.dx,this.y=o?this.y0:this.y0+this.dy,this.animModX=0,this.animModY=0,this.speedMultiplier=2*Math.random()+1,this.rangeMultiplierX=2*Math.random()-1,this.rangeMultiplierY=2*Math.random()-1}return i(e,[{key:"getX",value:function(){return this.x+this.animModX}},{key:"getY",value:function(){return this.y+this.animModY}}]),e}(),s=function(){function e(i,n,s){t(this,e),this.a=i,this.b=n,this.c=s,this.color=[0,0,0]}return i(e,[{key:"getCenterX",value:function(){return(this.a.getX()+this.b.getX()+this.c.getX())/3}},{key:"getCenterY",value:function(){return(this.a.getY()+this.b.getY()+this.c.getY())/3}}]),e}();return function(){function o(i){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t(this,o),this.canvas=i,this.context=i.getContext("2d"),this.points=[],this.triangles=[],this.defaults={widthMultiplier:1.2,heightMultiplier:1.2,horizontalDivisions:10,verticalDivisions:7,animationRangeX:90,animationRangeY:30,animationSpeed:2e3,color1:[53,92,125],color2:[192,108,132],strokeModR:1,strokeModG:1,strokeModB:1},this.settings={},Object.keys(this.defaults).forEach(function(t){return e.settings[t]=e.defaults[t]}),Object.keys(n).forEach(function(t){return e.settings[t]=n[t]}),this.trackWindowSize(),this.init(),this.nextFrame()}return i(o,[{key:"nextFrame",value:function(t){this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.update(t),requestAnimationFrame(this.nextFrame.bind(this))}},{key:"update",value:function(t){var i,e,n;for(i=1;i<this.points.length-1;i++)for(e=1;e<this.points[i].length-1;e++){var s=this.points[i][e];s.animModX=s.rangeMultiplierX*this.settings.animationRangeX*Math.sin(t/(this.settings.animationSpeed*s.speedMultiplier)),s.animModY=s.rangeMultiplierY*this.settings.animationRangeY*Math.cos(t/(this.settings.animationSpeed*s.speedMultiplier))}for(n=0;n<this.triangles.length;n++){var o=this.triangles[n];this.context.beginPath(),this.context.moveTo(o.a.getX(),o.a.getY()),this.context.lineTo(o.b.getX(),o.b.getY()),this.context.lineTo(o.c.getX(),o.c.getY()),this.context.closePath(),this.context.strokeStyle="rgb(                "+Math.max(0,Math.min(255,Math.round(o.color[0]*this.settings.strokeModR)))+",                "+Math.max(0,Math.min(255,Math.round(o.color[1]*this.settings.strokeModG)))+",                "+Math.max(0,Math.min(255,Math.round(o.color[2]*this.settings.strokeModB)))+"            )",this.context.fillStyle="rgb("+o.color[0]+", "+o.color[1]+", "+o.color[2]+")",this.context.stroke(),this.context.fill()}}},{key:"init",value:function(){var t,i,o;for(this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.points=[],this.triangles=[],t=0;t<=this.settings.horizontalDivisions;t++)for(this.points.push([]),i=0;i<=this.settings.verticalDivisions;i++)this.points[t].push(new n(t*(this.canvas.width/this.settings.horizontalDivisions),i*(this.canvas.height/this.settings.verticalDivisions),this.settings,0==t||t==this.settings.horizontalDivisions||0==i||i==this.settings.verticalDivisions));for(t=0;t<this.settings.horizontalDivisions;t++)for(i=0;i<this.settings.verticalDivisions;i++){var a=new s(this.points[t][i],this.points[t][i+1],this.points[t+1][i]),h=new s(this.points[t+1][i+1],this.points[t][i+1],this.points[t+1][i]);a.color=e.getColor(a.getCenterX(),a.getCenterY(),0,0,this.canvas.width,this.canvas.height,this.settings.color1,this.settings.color2),h.color=e.getColor(h.getCenterX(),h.getCenterY(),0,0,this.canvas.width,this.canvas.height,this.settings.color1,this.settings.color2),this.triangles.push(a,h)}for(o=0;o<this.triangles.length;o++){var r=this.triangles[o];this.context.lineWidth=1,this.context.lineCap="butt",this.context.beginPath(),this.context.moveTo(r.a.getX(),r.a.getY()),this.context.lineTo(r.b.getX(),r.b.getY()),this.context.lineTo(r.c.getX(),r.c.getY()),this.context.closePath(),this.context.strokeStyle="rgb(                "+r.color[0]*this.settings.strokeModR+",                "+r.color[1]*this.settings.strokeModG+",                "+r.color[2]*this.settings.strokeModB+"            )",this.context.fillStyle="rgb("+r.color[0]+", "+r.color[1]+", "+r.color[2]+")",this.context.stroke(),this.context.fill()}}},{key:"matchWindowSize",value:function(){this.canvas.width=this.canvas.parentElement.clientWidth*this.settings.widthMultiplier,this.canvas.height=this.canvas.parentElement.clientHeight*this.settings.heightMultiplier;var t=(this.canvas.width-this.canvas.parentElement.clientWidth)/2,i=(this.canvas.height-this.canvas.parentElement.clientHeight)/2;this.canvas.style.position="absolute",this.canvas.style.left=-t+"px",this.canvas.style.top=-i+"px",this.init()}},{key:"trackWindowSize",value:function(){this.matchWindowSize(),window.addEventListener("resize",this.matchWindowSize.bind(this))}}]),o}()}();